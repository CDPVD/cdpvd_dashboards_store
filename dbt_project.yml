name: "cdpvd_dashboards_store"
version: "0.0.0"
config-version: 2

profile: "replaceMeInLocals"

model-paths: ["models"]
analysis-paths: ["analyses"]
test-paths: ["tests"]
seed-paths: ["seeds"]
macro-paths: ["macros"]
snapshot-paths: ["snapshots"]

target-path: "target"
clean-targets:
    - "target"
    - "dbt_packages"

seeds:
    +tags: ["seeds"]
    cdpvd_store:
        +enabled:
            false
        dashboards:
            other:
                pevr:
                    +tags: ["pevr"]
                    +schema: "dashboard_pevr"
models:

    store:
        +enabled: true
        marts:
            human_resources:
                features:
                staging:
            educ_serv:
                features:
                staging:

        dashboards:
            human_resources:
                retirement:
                    +enabled: false
        interfaces:
            gpi:
                i_gpm_e_dan:
                    +enabled: false
            jade:
                i_e_ri_mentions:
                    +enabled: false
                i_t_prog:
                    +enabled: false


    cdpvd_dashboards_store:      
        +materialized: table                  
        dashboards:
            other:            
                pevr:
                    +tags: ["pevr"]
                    +schema: "dashboard_pevr"
                    pbi_tables:
                        +post-hook:
                            [
                                "{{ store.stamp_model('dashboard_pevr') }}",
                            ]                        

vars:
    is_context_core: false
    # The source database to pull the data for a css.
    database_bi: "Replace me in the CSS repositery"
    database_paie: "Replace me in the CSS repositery"
    database_gpi: "Replace me in the CSS repositery"
    database_jade: "Replace me in the CSS repositery"
    database_geobus: "Replace me in the CSS repositery" # contains routes, buses, contractors, student files, and related to db GPL.
    database_piastre: "Replace me in the CSS repositery" # financial data on school transport. no connections to db Geobus.
    database_prodrome: "Replace me in the CSS repositery" # Modelling output from the Sciance's models.
    # res_epreuves's dashboard variables:

    interfaces:
        gpi:
            max_etapes: 30 # Must be set to the number of etapes, as found in gpm_t_obj_mat_grp
            max_periodes: 20 # Must be set to the number of periodes, as identified in gpm_t_cal
    marts:
        educ_serv:
            recency:
                years_of_data_absences: 10 # How many years of data to keep for the 'absences' centric dashboards.
                years_of_data_grades: 10 # How many years of data to keep for the 'grades' centric dashboards.
    dashboards:
        res_epreuves:
            cod_css: 866%


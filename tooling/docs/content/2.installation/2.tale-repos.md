---
title: Le conte des deux répertoires
---

# Deux répertoires, un seul but ! 

> Quand j'étais enfant, ma mère me racontait une histoire avant d'aller au lit. Ma préférée était **Le conte des deux répertoires**. Ça va comme suit :
> 
> "Il  y a longtemps, dans une CdeP, un petit répertoire `core.dashboards_store` est né. Ce répertoire essayait très fort de produire des ETLs pour les centres de services scolaires. Mais il y avait tant de centres de services scolaires et rares étaient ceux qui avaient la capacité en termes SQL d'intégrer ces répertoires à leur contexte. Alors, le répertoire `core.datashboards_store` décida  de se diviser en plusieurs petits répertoires, un pour chaque centre de services. C'est alors que les répertoires `cssXX.dashboard_store` sont nés. Quant au répertoire `cssXX.dashboards_store` , il eut dès lors le pouvoir de surcharger tout ce que contenait le `core.datashboards_store`. Et le répertoire `core.dashboards_store` était heureux, le répertoire `cssXX.dashboards_store` était heureux, ainsi que la CdeP . Ils décidèrent de fusionner en develop pour être heureux pour la fin des temps."


La morale de cette histoire est que le répertoire `core.dashboards_store` est le répertoire parent de tous les répertoires `cssXX.dashboards_store`. Le répertoire `core.dashboards_store`  contient tous les ETLs communs à l'ensemble des CSS. Le répertoire `cssXX.dashboards_store` contient tout ce qui est  **spécifique** au cssXX, **incluant, si nécessaire, des fichiers SQL surchargeant ceux du noyau (core).** 

Si vous avez déjà été face à de la programmation orientée objet (OOP), le répertoire `core.dashboards_store` lui est semblable, par un contenu parent de méthodes surchargeables,  et le répertoire `cssXX.dashboards_store` est le contenu enfant pouvant surcharger certaines méthodes du répertoire parent.

::alert{type="info"}
Vous devrez TOUJOURS utiliser deux répertoires pour travailler dans le magasin. Le `core.dashboards_store` contenant tout ce qui partagé entre les centres de services scolaires, et votre propre `cssXX.dashboards_store` exécutant ce qui ne peut pas être partagé, comme, par exemple, la façon d'identifier les élèves en adaptation scolaire dans les écoles de votre centre de services scolaire. 
::

::alert{type="warning"}
Lorsque vous intégrez le magasin dans votre CSS, toutes les modifications que vous faites (surcharger, activer, implémenter un adaptateur, alimenter un fichier de données statique **Seed**), devraient se retrouver dans le répertoire `cssXX.dashboards_store`. Le répertoire `core.dashboards_store` ne devrait jamais être modifié puisqu'il est partagé entre tous les CSS.
::

# Reproduire le répertoire

::alert{type="warning"}
Les deux répertoires sont reproduits dans le même dossier (directory), le `<working directory>` de votre choix. Sinon, vous devrez changer le `cssXX.dashboards_store/packages.yaml` pour refléter ce nouveau chemin.
::

## L'amorce du travail sur les tableaux de bord du magasin

::alert{type="warning"}
Pour pouvoir reproduire le répertoire à travers SSH, vous aurez besoin de configurer de façon appropriée le **compte github**. Votre "local public key" devra être ajouté à votre compte Github. Si vous n'en avez pas, suivez [ce guide](https://docs.github.com/en/github/authenticating-to-github/connecting-to-github-with-ssh) pour vous en créer une. Assurez-vous de suivre les consignes de Linux, que vous utilisiez WSL2 ou Linux server.
::

1. Commencez par reproduire le noyau (Core) :
  
```bash
git clone git@github.com:Sciance-Inc/core.dashboards_store.git
```

2. Créez `Poetry / Virtualenv` à partir du noyau. Cela installera tous les paquets Python dont vous aurez besoin, incluant DBT.

```bash
cd core.dashboards_store
poetry shell && poetry install --no-root  # The --no-root might not be needed, depending of your Poetry's version [#38](https://github.com/Sciance-Inc/core.dashboards_store/issues/38)
```


3. Amorcez un nouveau répertoire `cssXX.dashboards_store` à partir du modèle du noyau.
::alert{type="info"}
Vous serez invité à inscrire quelques informations
::
```bash
cd ../ # To return a t
cookiecutter core.dashboards_store/tooling/template
```

4. Suivez les meilleures pratiques et utilisez git pour le répertoire que vous venez de créer

```bash
git init
git remote add origin <your remote's url>
git add .
git commit -m "feat: one commit to initiate them all, one commit to rule them all, one commit to bring them all and in the gitness bind them, in the land of Github where the bugs lie."
git push -u origin master
```

5. Allez lire le `cssXX.dashboards_store/README.md` pour en apprendre davantage sur les étapes à suivre pour configurer les dossiers de façon à ce que tout fonctionne.


# Que venez-vous de faire ?

Si tout a bien fonctionné, vous devriez voir les dossiers structurés de la façon suivante :

```bash
<working directory>
├── core.dashboards_store
└── cssXX.dashboards_store
```

Les deux sous-dossiers devraient contenir les projets (git-ready DBT projects).

::alert{type="info"}
À partir de maintenant, `<working directory>` vous montrera toujours le chemin vers les dossiers contenant les deux répertoires, sauf indication contraire.
::

version: 2

seeds:
  - name: indicateurs_pevr_cdpvd
    description: Mapping des indicateurs communs avec leur description.
    tests:
      - core_dashboards_store.resolution:
          combination_of_columns:
            - id_indicateur_meq
    columns:
      - name: objectif
        description: L'objectif de l'indicateur, en référence au PEVR
        tests:
          - not_null
      - name: id_indicateur_meq
        description: Identifiant de l'indicateur de la cdpvd
        tests:
          - not_null
          - unique
      - name: id_indicateur_css
        description: Mapping optionnel des indicateurs personalisés des css.
      - name: description_indicateur
        description: Description de l'indicateur
        tests:
          - unique
      - name: Code_matière
        description: Code matière optionnel. Ex -> 132508
      - name: no_competence
        description: Le numéro de compétence du code matière.
    config:
      schema: dashboard_pevr_seeds
      column_types:
        objectif: nvarchar(max)
        id_indicateur_meq: nvarchar(max)
        id_indicateur_css: nvarchar(max)
        description_indicateur: nvarchar(max)
        code_matiere: nvarchar(max)
        no_competence: nvarchar(max)

  - name: custom_indicateurs_pevr_cdpvd
    description: Mapping des indicateurs communs avec leur description.
    tests:
      - core_dashboards_store.resolution:
          combination_of_columns:
            - id_indicateur_meq
    columns:
      - name: objectif
        description: L'objectif de l'indicateur, en référence au PEVR
        tests:
          - not_null
      - name: id_indicateur_meq
        description: Identifiant de l'indicateur de la cdpvd
        tests:
          - not_null
          - unique
      - name: id_indicateur_css
        description: Mapping optionnel des indicateurs personalisés des css.
      - name: description_indicateur
        description: Description de l'indicateur
        tests:
          - unique
      - name: Code_matière
        description: Code matière optionnel. Ex -> 132508
      - name: no_competence
        description: Le numéro de compétence du code matière.
    config:
      tags:
        - pevr
      schema: dashboard_pevr_seeds
      column_types:
        objectif: nvarchar(max)
        id_indicateur_meq: nvarchar(max)
        id_indicateur_css: nvarchar(max)
        description_indicateur: nvarchar(max)
        code_matiere: nvarchar(max)
        no_competence: nvarchar(max)
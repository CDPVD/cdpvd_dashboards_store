version: 2

models:
  - name: cdpvd_abstsm_report_bris_service
    description: >
      Identifie les élèves avec une séquence d'absence (bris de service).
      Le tableau ne calcule les séquences d'absence que pour l'année scolaire en cours.
    tests:
      - core_dashboards_store.resolution:
          combination_of_columns:
            - school_friendly_name
            - fiche
            - event_start_date

  - name: cdpvd_abstsm_report_daily_absences_kind_distribution
    description: >
      Agrége les événements d'absence par catégorie pour les deux dernières années. Utiliser pour approfondir et mieux comprendre les raisons des absences.
    tests:
      - core_dashboards_store.resolution:
          combination_of_columns:
            - filter_key
            - date_evenement
            - event_description

  - name: cdpvd_abstsm_report_daily_absences_matiere_distribution
    description: >
      Agrége les événements d'absence par matiere pour les deux dernières années. Utiliser pour approfondir et mieux comprendre les raisons des absences.
    tests:
      - core_dashboards_store.resolution:
          combination_of_columns:
            - filter_key
            - date_evenement
            - code_matiere

  - name: cdpvd_abstsm_report_daily_absences_rate
    description: >
      Calcule le taux d'absence quotidien pour divers types d'événements d'absentéisme (absence de journée complète, absences partielles, ...).
      Le taux est calculé au niveau jour * école * groupe * type d'absence.
    tests:
      - core_dashboards_store.resolution:
          combination_of_columns:
            - filter_key
            - jour_semaine
            - date_evenement

  - name: cdpvd_abstsm_report_etape_absences_rate
    description: >
      Calcule le taux d'absence agrégé pour divers types d'événements d'absentéisme (absence de journée complète, absences partielles, ...).
      Le taux d'absence est agrégé par étape.
      Le taux est calculé au niveau étape * école * groupe * type d'absence.
    tests:
      - core_dashboards_store.resolution:
          combination_of_columns:
            - filter_key
            - etape_friendly

  - name: cdpvd_abstsm_report_filters
    description: Tableau auxiliaire utilisé pour synchroniser les filtres entre les différents rapports d'absentéisme.
    tests:
      - core_dashboards_store.resolution:
          combination_of_columns:
            - filter_key
            - eco
            - id_eco
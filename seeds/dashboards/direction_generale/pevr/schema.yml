version: 2

seeds:
  - name: cibles_indicateurs_annuelles_pevr_cdpvd
    description: La seed de la cdpvd qui contient les informations des cibles anuelles des indicateurs de la CDPVD.
    tests:
      - core_dashboards_store.resolution:
          combination_of_columns:
            - id_indicateur_css
            - id_indicateur_cdpvd
            - annee_scolaire
    columns:
      - name: id_indicateur_meq
        description: L'identification unique du PEVR meq.
      - name: id_indicateur_cdpvd
        description: L'identification unique des indicateurs personnalisé pevr cdpvd.
        tests:
          - not_null
      - name: id_indicateur_css
        description: L'identification unique et personnalisable des CSS.
      - name: annee_scolaire
        description: L'année scolaire
        tests:
          - not_null
      - name: cible
        description: Pourcentage ciblé
    config:
      schema: dashboard_pevr_seeds
      column_types:
        id_indicateur_meq: nvarchar(max)
        id_indicateur_cdpvd: nvarchar(max)
        id_indicateur_css: nvarchar(max)
        annee_scolaire: nvarchar(max)
        cible: float

  - name: indicateurs_pevr_cdpvd
    description: Mapping des indicateurs communs avec leur description.
    tests:
      - core_dashboards_store.resolution:
          combination_of_columns:
            - id_indicateur_css
    columns:
      - name: objectif
        description: L'objectif de l'indicateur, en référence au PEVR
        tests:
          - not_null
      - name: id_indicateur_meq
        description: Identifiant de l'indicateur meq de la cdpvd.
      - name: id_indicateur_cdpvd
        description: L'identification unique des indicateurs personnalisé pevr cdpvd.
        tests:
          - not_null
          - unique
      - name: id_indicateur_css
        description: Mapping optionnel des indicateurs personalisés des css.
        tests:
          - not_null
          - unique
      - name: description_indicateur
        description: Description de l'indicateur
        tests:
          - unique
      - name: Code_matière
        description: Code matière optionnel. Ex -> 132508
      - name: no_competence
        description: Le numéro de compétence du code matière.
    config:
      schema: dashboard_pevr_seeds
      column_types:
        objectif: nvarchar(max)
        id_indicateur_meq: nvarchar(max)
        id_indicateur_cdpvd: nvarchar(max)
        id_indicateur_css: nvarchar(max)
        description_indicateur: nvarchar(max)
        code_matiere: nvarchar(max)
        no_competence: nvarchar(max)

  - name: custom_cibles_indicateurs_annuelles_pevr_css
    description: La seed personnalisé, dite 'custom' de la css qui contient les informations des cibles anuelles des indicateurs de la CDPVD.
    tests:
      - core_dashboards_store.resolution:
          combination_of_columns:
            - id_indicateur_meq
            - id_indicateur_css
            - id_indicateur_cdpvd
    columns:
      - name: id_indicateur_meq
        description: L'identification unique du PEVR meq.
      - name: id_indicateur_cdpvd
        description: L'identification unique des indicateurs personnalisé pevr cdpvd.
        tests:
          - not_null
      - name: id_indicateur_css
        description: L'identification unique et personnalisable des CSS.
        tests:
          - not_null
      - name: annee_scolaire
        description: L'année scolaire
        tests:
          - not_null
      - name: cible
        description: Pourcentage ciblé
    config:
      schema: dashboard_pevr_seeds
      column_types:
        id_indicateur_meq: nvarchar(max)
        id_indicateur_cdpvd: nvarchar(max)
        id_indicateur_css: nvarchar(max)
        annee_scolaire: nvarchar(max)
        cible: float

  - name: custom_indicateurs_pevr_css
    description: Mapping des indicateurs communs avec leur description.
    tests:
      - core_dashboards_store.resolution:
          combination_of_columns:
            - id_indicateur_css
    columns:
      - name: objectif
        description: L'objectif de l'indicateur, en référence au PEVR
        tests:
          - not_null
      - name: id_indicateur_meq
        description: Identifiant de l'indicateur meq de la cdpvd.
      - name: id_indicateur_cdpvd
        description: L'identification unique des indicateurs personnalisé pevr cdpvd.
        tests:
          - not_null
          - unique
      - name: id_indicateur_css
        description: Mapping optionnel des indicateurs personalisés des css.
        tests:
          - not_null
          - unique
      - name: description_indicateur
        description: Description de l'indicateur
        tests:
          - unique
      - name: Code_matière
        description: Code matière optionnel. Ex -> 132508
      - name: no_competence
        description: Le numéro de compétence du code matière.
    config:
      schema: dashboard_pevr_seeds
      column_types:
        objectif: nvarchar(max)
        id_indicateur_meq: nvarchar(max)
        id_indicateur_cdpvd: nvarchar(max)
        id_indicateur_css: nvarchar(max)
        description_indicateur: nvarchar(max)
        code_matiere: nvarchar(max)
        no_competence: nvarchar(max)